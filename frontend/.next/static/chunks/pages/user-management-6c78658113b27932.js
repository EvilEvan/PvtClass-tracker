(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{1246:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return s(1377)}])},1377:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return f}});var a=s(4246),t=s(1147),o=s.n(t),d=s(8038),n=s.n(d),l=s(9894),i=s.n(l),c=s(7378);function f(){let[e,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[d,l]=(0,c.useState)(!1),[f,x]=(0,c.useState)(!1),[p,m]=(0,c.useState)({email:"",name:"",password:"",role:"TEACHER"}),[u,g]=(0,c.useState)(""),[h,j]=(0,c.useState)("");(0,c.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("http://localhost:8000/auth/users"),s=await e.json();r(s),t(!1)}catch(e){console.error("Error fetching users:",e),t(!1)}},y=async e=>{e.preventDefault(),t(!0),j("");try{let e=await fetch("http://localhost:8000/auth/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),r=await e.json();r.error?j("Error: ".concat(r.error)):(j("Success! ".concat(r.role," user created: ").concat(r.email)),m({email:"",name:"",password:"",role:"TEACHER"}),l(!1),b())}catch(e){j("Error: Could not connect to server.")}finally{t(!1)}},N=async e=>{e.preventDefault();try{let e=await fetch("http://localhost:8000/auth/master-unlock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:u})}),r=await e.json();r.error?j("Master unlock failed: ".concat(r.error)):(j("✅ ".concat(r.message)),x(!1),g(""))}catch(e){j("Error: Could not validate master password.")}},C=async(e,r)=>{if(confirm("Are you sure you want to delete user: ".concat(r,"?")))try{(await fetch("http://localhost:8000/auth/users/".concat(e),{method:"DELETE"})).ok?(j("User ".concat(r," deleted successfully.")),b()):j("Error deleting user.")}catch(e){j("Error: Could not delete user.")}},k=e=>{switch(e){case"ADMIN":return"#ff4444";case"MODERATOR":return"#ff9500";case"TEACHER":return"#00d4ff";default:return"#888"}},D=e=>{switch(e){case"ADMIN":return"\uD83D\uDC51";case"MODERATOR":return"\uD83D\uDEE1️";case"TEACHER":return"\uD83C\uDF93";default:return"\uD83D\uDC64"}};return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:"User Management - Private Class Tracker"})}),(0,a.jsx)("main",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"linear-gradient(135deg, #0a0e1a 0%, #1a2332 50%, #2a3441 100%)",color:"#e0e6ed"},children:(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{width:"60px",height:"60px",border:"3px solid #00d4ff",borderTop:"3px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),(0,a.jsx)("p",{children:"Loading User Management..."})]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{className:"jsx-ff161281ed666c63",children:"User Management - Private Class Tracker"})}),(0,a.jsxs)("main",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0e1a 0%, #1a2332 50%, #2a3441 100%)",color:"#e0e6ed",fontFamily:"system-ui, -apple-system, sans-serif"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("header",{style:{borderBottom:"1px solid #00d4ff",backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"20px 0"},className:"jsx-ff161281ed666c63",children:(0,a.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"0 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},className:"jsx-ff161281ed666c63",children:[(0,a.jsxs)("div",{className:"jsx-ff161281ed666c63",children:[(0,a.jsx)(i(),{href:"/",style:{color:"#00d4ff",textDecoration:"none"},children:(0,a.jsx)("h1",{style:{fontSize:"2rem",color:"#00d4ff",fontWeight:"300",margin:0,textShadow:"0 0 10px rgba(0, 212, 255, 0.5)"},className:"jsx-ff161281ed666c63",children:"← User Management"})}),(0,a.jsx)("p",{style:{color:"#b0b7c3",margin:"5px 0 0 0",fontSize:"0.9rem"},className:"jsx-ff161281ed666c63",children:"Administrative Control Panel"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("button",{onClick:()=>l(!0),style:{background:"linear-gradient(45deg, #00d4ff, #0099cc)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-ff161281ed666c63",children:"\uD83D\uDC64 Create User"}),(0,a.jsx)("button",{onClick:()=>x(!0),style:{background:"linear-gradient(45deg, #ff4444, #cc3333)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-ff161281ed666c63",children:"\uD83D\uDD13 Master Unlock"})]})]})}),(0,a.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"40px 20px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"40px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsxs)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.4)",border:"1px solid #00d4ff",borderRadius:"12px",padding:"24px",textAlign:"center"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("h3",{style:{color:"#00d4ff",fontSize:"2rem",margin:"0 0 8px 0"},className:"jsx-ff161281ed666c63",children:e.length}),(0,a.jsx)("p",{style:{color:"#b0b7c3",margin:0},className:"jsx-ff161281ed666c63",children:"Total Users"})]}),(0,a.jsxs)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.4)",border:"1px solid #ff4444",borderRadius:"12px",padding:"24px",textAlign:"center"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("h3",{style:{color:"#ff4444",fontSize:"2rem",margin:"0 0 8px 0"},className:"jsx-ff161281ed666c63",children:e.filter(e=>"ADMIN"===e.role).length}),(0,a.jsx)("p",{style:{color:"#b0b7c3",margin:0},className:"jsx-ff161281ed666c63",children:"Administrators"})]}),(0,a.jsxs)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.4)",border:"1px solid #ff9500",borderRadius:"12px",padding:"24px",textAlign:"center"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("h3",{style:{color:"#ff9500",fontSize:"2rem",margin:"0 0 8px 0"},className:"jsx-ff161281ed666c63",children:e.filter(e=>"MODERATOR"===e.role).length}),(0,a.jsx)("p",{style:{color:"#b0b7c3",margin:0},className:"jsx-ff161281ed666c63",children:"Moderators"})]}),(0,a.jsxs)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.4)",border:"1px solid #00d4ff",borderRadius:"12px",padding:"24px",textAlign:"center"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("h3",{style:{color:"#00d4ff",fontSize:"2rem",margin:"0 0 8px 0"},className:"jsx-ff161281ed666c63",children:e.filter(e=>"TEACHER"===e.role).length}),(0,a.jsx)("p",{style:{color:"#b0b7c3",margin:0},className:"jsx-ff161281ed666c63",children:"Teachers"})]})]}),(0,a.jsx)("div",{style:{display:"grid",gap:"16px"},className:"jsx-ff161281ed666c63",children:e.map(e=>(0,a.jsxs)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.4)",border:"1px solid ".concat(k(e.role)),borderRadius:"12px",padding:"24px",display:"grid",gridTemplateColumns:"auto 1fr auto",alignItems:"center",gap:"20px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("div",{style:{fontSize:"2rem"},className:"jsx-ff161281ed666c63",children:D(e.role)}),(0,a.jsxs)("div",{className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("h3",{style:{color:"#00d4ff",fontSize:"1.2rem",margin:"0 0 8px 0",fontWeight:"500"},className:"jsx-ff161281ed666c63",children:e.name||"Unnamed User"}),(0,a.jsxs)("p",{style:{color:"#e0e6ed",margin:"4px 0",fontSize:"0.95rem"},className:"jsx-ff161281ed666c63",children:["\uD83D\uDCE7 ",e.email]}),(0,a.jsxs)("p",{style:{color:"#b0b7c3",margin:"4px 0",fontSize:"0.85rem"},className:"jsx-ff161281ed666c63",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("span",{style:{padding:"6px 16px",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"600",backgroundColor:"".concat(k(e.role),"20"),color:k(e.role),border:"1px solid ".concat(k(e.role))},className:"jsx-ff161281ed666c63",children:e.role}),(0,a.jsx)("button",{onClick:()=>C(e.id,e.email),style:{background:"transparent",border:"1px solid #ff4444",color:"#ff4444",padding:"8px 16px",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",textTransform:"uppercase"},className:"jsx-ff161281ed666c63",children:"Delete"})]})]},e.id))})]}),d&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},className:"jsx-ff161281ed666c63",children:(0,a.jsxs)("div",{style:{backgroundColor:"#1a2332",border:"1px solid #00d4ff",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"100%"},className:"jsx-ff161281ed666c63",children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("h2",{style:{color:"#00d4ff",margin:0},className:"jsx-ff161281ed666c63",children:"Create New User"}),(0,a.jsx)("button",{onClick:()=>l(!1),style:{background:"none",border:"none",color:"#00d4ff",fontSize:"24px",cursor:"pointer"},className:"jsx-ff161281ed666c63",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:y,style:{display:"grid",gap:"20px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsxs)("div",{className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("label",{style:{color:"#e0e6ed",display:"block",marginBottom:"8px"},className:"jsx-ff161281ed666c63",children:"Role"}),(0,a.jsxs)("select",{value:p.role,onChange:e=>m({...p,role:e.target.value}),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.3)",border:"1px solid #00d4ff",borderRadius:"8px",color:"#e0e6ed",fontSize:"1rem"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("option",{value:"TEACHER",className:"jsx-ff161281ed666c63",children:"\uD83D\uDC68‍\uD83C\uDFEB Teacher"}),(0,a.jsx)("option",{value:"MODERATOR",className:"jsx-ff161281ed666c63",children:"\uD83D\uDEE1️ Moderator"}),(0,a.jsx)("option",{value:"ADMIN",className:"jsx-ff161281ed666c63",children:"\uD83D\uDC51 Administrator"})]})]}),(0,a.jsxs)("div",{className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("label",{style:{color:"#e0e6ed",display:"block",marginBottom:"8px"},className:"jsx-ff161281ed666c63",children:"Email"}),(0,a.jsx)("input",{type:"email",value:p.email,onChange:e=>m({...p,email:e.target.value}),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.3)",border:"1px solid #00d4ff",borderRadius:"8px",color:"#e0e6ed",fontSize:"1rem"},className:"jsx-ff161281ed666c63"})]}),(0,a.jsxs)("div",{className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("label",{style:{color:"#e0e6ed",display:"block",marginBottom:"8px"},className:"jsx-ff161281ed666c63",children:"Full Name"}),(0,a.jsx)("input",{type:"text",value:p.name,onChange:e=>m({...p,name:e.target.value}),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.3)",border:"1px solid #00d4ff",borderRadius:"8px",color:"#e0e6ed",fontSize:"1rem"},className:"jsx-ff161281ed666c63"})]}),(0,a.jsxs)("div",{className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("label",{style:{color:"#e0e6ed",display:"block",marginBottom:"8px"},className:"jsx-ff161281ed666c63",children:"Password"}),(0,a.jsx)("input",{type:"password",value:p.password,onChange:e=>m({...p,password:e.target.value}),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.3)",border:"1px solid #00d4ff",borderRadius:"8px",color:"#e0e6ed",fontSize:"1rem"},className:"jsx-ff161281ed666c63"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("button",{type:"button",onClick:()=>l(!1),style:{padding:"12px 24px",backgroundColor:"transparent",color:"#b0b7c3",border:"1px solid #666",borderRadius:"8px",cursor:"pointer"},className:"jsx-ff161281ed666c63",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:s,style:{padding:"12px 24px",background:"linear-gradient(45deg, #00d4ff, #0099cc)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},className:"jsx-ff161281ed666c63",children:s?"Creating...":"Create User"})]})]})]})}),f&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},className:"jsx-ff161281ed666c63",children:(0,a.jsxs)("div",{style:{backgroundColor:"#1a2332",border:"1px solid #ff4444",borderRadius:"12px",padding:"30px",maxWidth:"400px",width:"100%"},className:"jsx-ff161281ed666c63",children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("h2",{style:{color:"#ff4444",margin:0},className:"jsx-ff161281ed666c63",children:"\uD83D\uDD13 Master Override"}),(0,a.jsx)("button",{onClick:()=>x(!1),style:{background:"none",border:"none",color:"#ff4444",fontSize:"24px",cursor:"pointer"},className:"jsx-ff161281ed666c63",children:"\xd7"})]}),(0,a.jsx)("p",{style:{color:"#b0b7c3",marginBottom:"20px",fontSize:"0.9rem"},className:"jsx-ff161281ed666c63",children:"Enter the system master password to unlock any profile in the system."}),(0,a.jsxs)("form",{onSubmit:N,style:{display:"grid",gap:"20px"},className:"jsx-ff161281ed666c63",children:[(0,a.jsxs)("div",{className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("label",{style:{color:"#e0e6ed",display:"block",marginBottom:"8px"},className:"jsx-ff161281ed666c63",children:"Master Password"}),(0,a.jsx)("input",{type:"password",value:u,onChange:e=>g(e.target.value),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"rgba(0, 0, 0, 0.3)",border:"1px solid #ff4444",borderRadius:"8px",color:"#e0e6ed",fontSize:"1rem"},className:"jsx-ff161281ed666c63"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},className:"jsx-ff161281ed666c63",children:[(0,a.jsx)("button",{type:"button",onClick:()=>x(!1),style:{padding:"12px 24px",backgroundColor:"transparent",color:"#b0b7c3",border:"1px solid #666",borderRadius:"8px",cursor:"pointer"},className:"jsx-ff161281ed666c63",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",style:{padding:"12px 24px",background:"linear-gradient(45deg, #ff4444, #cc3333)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},className:"jsx-ff161281ed666c63",children:"\uD83D\uDD13 Unlock"})]})]})]})}),h&&(0,a.jsxs)("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 24px",borderRadius:"8px",backgroundColor:h.includes("Error")?"rgba(220, 53, 69, 0.9)":"rgba(40, 167, 69, 0.9)",color:"white",fontSize:"0.9rem",zIndex:1001,maxWidth:"400px"},className:"jsx-ff161281ed666c63",children:[h,(0,a.jsx)("button",{onClick:()=>j(""),style:{background:"none",border:"none",color:"white",fontSize:"16px",cursor:"pointer",marginLeft:"12px"},className:"jsx-ff161281ed666c63",children:"\xd7"})]})]}),(0,a.jsx)(o(),{id:"ff161281ed666c63",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}}},function(e){e.O(0,[894,118,888,774,179],function(){return e(e.s=1246)}),_N_E=e.O()}]);